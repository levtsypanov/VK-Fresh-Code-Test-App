(window.webpackJsonpVKFreshCodeTestApp=window.webpackJsonpVKFreshCodeTestApp||[]).push([[0],{185:function(e,t,a){e.exports=a(310)},310:function(e,t,a){"use strict";a.r(t);a(186),a(212),a(214),a(215),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254);var n,l=a(0),r=a.n(l),o=a(56),c=a.n(o),i=a(34),u=a.n(i),m=a(132),d=a.n(m),p=a(133),s=a.n(p),E=(a(262),a(79)),f=a(31),b=a(35),h=a(59),v=a.n(h),g=a(128),y=a.n(g),C=a(129),j=a.n(C),O=a(127),F=a.n(O),k=a(4),T=a(43),M=a.n(T),A=a(122),w=a.n(A),I=a(123),R=a.n(I),S=function(e){var t=e.description,a=e.name,n=e.isList,o=void 0!==n&&n,c=e.onClick,i=e.objectTrip,u=Object(l.useState)(!1),m=Object(b.a)(u,2),d=m[0],p=m[1],s=r.a.createElement(r.a.Fragment,null,r.a.createElement(k.e,{size:"s"},"\u041c\u0435\u0441\u0442: ",i.data.detail.countPlace),r.a.createElement(k.b,{size:"m",mode:"secondary",style:{marginTop:5},onClick:function(){return c(i)}},r.a.createElement(R.a,null)));return r.a.createElement(k.c,{before:r.a.createElement(k.a,{src:i.data.photoUser}),style:{backgroundColor:i.settings.colorClick},description:t,asideContent:o||s,size:"l",bottomContent:r.a.createElement("div",null,r.a.createElement(k.b,{mode:d?"secondary":"primary",disabled:!0===d,before:d?r.a.createElement(w.a,{style:{marginRight:5}}):r.a.createElement(M.a,{style:{marginRight:5}}),onClick:function(){return p(!0)}},"\u042f \u043f\u043e\u0435\u0434\u0443! (",i.data.detail.price,"\u20bd)"))},a)},P=function(e){var t=e.objectTrip,a={padding:0,margin:0,fontSize:12,maxWidth:150},n=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:a},"\u0410\u0432\u0442\u043e -"," ",r.a.createElement("b",null,"".concat(t.data.detail.auto," ").concat(t.data.detail.autoModel))),r.a.createElement("p",{style:a},"\u041d\u043e\u043c\u0435\u0440 - ",r.a.createElement("b",null,t.data.detail.autoNum)),r.a.createElement("p",{style:a},"\u0426\u0432\u0435\u0442 - ",r.a.createElement("b",null,t.data.detail.autoColor)),r.a.createElement("p",{style:a},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439:"," ",r.a.createElement("span",{style:Object(f.a)({},a,{whiteSpace:"pre-wrap",fontWeight:"bold"})},t.data.detail.comment)));return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:a},r.a.createElement("b",null,t.data.detail.cityFrom+String.fromCharCode(32,10144,32)+t.data.detail.cityTo)),t.isFullInfo?n:null)},_=a(124),L=a.n(_),x=function(e){var t=e.openModal;return r.a.createElement(k.v,{icon:r.a.createElement(L.a,null),onIconClick:t})},z=function(e){for(var t=0;t<15;t++);return r.a.createElement(k.j,null,r.a.createElement(k.o,null,[]))},N="INDEX",U="CREATE_TRIP",D=a(125),B=a.n(D),V="#FFFFFF",H="#edf0f5",W=a(126),K=a.n(W),G=function(e){var t=e.id,a=e.go,n=e.setActiveModal,o=e.trips,c=Object(l.useState)("Companion"),i=Object(b.a)(c,2),u=i[0],m=i[1],d=Object(l.useState)(),p=Object(b.a)(d,2),s=p[0],h=p[1];Object(l.useEffect)((function(){h(o.map((function(e){return Object(f.a)({},e,{settings:{colorClick:V}})})))}),[o]);var g=function(e){for(var t=Object(E.a)(s),a=0;a<t.length;a++)t[a].id===e.id&&(t[a].isFullInfo=!t[a].isFullInfo,t[a].settings.colorClick=H,void 0!==t[a-1]&&!0===t[a-1].isFullInfo&&(t[a-1].isFullInfo=!1,t[a-1].settings.colorClick=V),void 0!==t[a+1]&&!0===t[a+1].isFullInfo&&(t[a+1].isFullInfo=!1,t[a+1].settings.colorClick=V));h(Object(E.a)(t))},C=[];return B.a.forEach(s,(function(e,t){C.push(r.a.createElement(S,{key:"".concat(t,"_").concat(e.id),onClick:g,objectTrip:e,name:r.a.createElement(r.a.Fragment,null,e.data.first_name+" "+e.data.last_name,r.a.createElement("span",{style:{background:"#ff3347",padding:3,borderRadius:9,fontSize:12,fontWeight:"bold",marginLeft:5,color:"white"}},K.a.unix(e.data.detail.timeToGo._seconds).format("HH:MM"))),description:r.a.createElement(P,{objectTrip:e})}))})),r.a.createElement(v.a,{id:t,separator:!1},r.a.createElement(k.u,null,"\u041f\u043e\u043f\u0443\u0442\u0447\u0438\u043a\u0438"),r.a.createElement(k.k,null,r.a.createElement(x,{openModal:function(){return n("MODAL_SEARCH")}}),"Companion"===u?null:r.a.createElement(F.a,null,r.a.createElement(y.a,{size:"xl",mode:"secondary",onClick:a,"data-to":U},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0435\u0437\u0434\u043a\u0443"))),r.a.createElement(k.y,null),r.a.createElement(k.g,null,r.a.createElement(k.z,null,r.a.createElement(k.A,{onClick:function(){return m("Companion")},selected:"Companion"===u},"\u041f\u043e\u043f\u0443\u0442\u043a\u0438"),r.a.createElement(k.A,{onClick:function(){return m("MyTrips")},selected:"MyTrips"===u},"\u041c\u043e\u0438 \u043f\u043e\u0435\u0437\u0434\u043a\u0438"))),"Companion"===u?r.a.createElement(j.a,null,C):r.a.createElement(z,null))},J=function(e){var t=e.modalBack;return r.a.createElement(k.h,null,r.a.createElement(k.x,{top:"\u041e\u0442\u043a\u0443\u0434\u0430",placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"}),r.a.createElement(k.x,{top:"\u041a\u0443\u0434\u0430",placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"}),r.a.createElement(k.i,{top:"\u0414\u0430\u0442\u0430"},r.a.createElement(k.n,{type:"date"})),r.a.createElement(k.i,{top:"\u0412\u0440\u0435\u043c\u044f"},r.a.createElement(k.n,{type:"time"})),r.a.createElement(k.b,{size:"xl",onClick:t},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"))},q=function(e){var t=e.modalBack;return r.a.createElement(k.h,null,r.a.createElement(k.f,null,"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u043d\u043e\u0432\u044b\u0445 \u043f\u043e\u0435\u0437\u0434\u043a\u0430\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0412\u0430\u043c\u0438 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u043a \u0432\u0440\u0435\u043c\u0435\u043d\u0438"),r.a.createElement(k.x,{top:"\u041e\u0442\u043a\u0443\u0434\u0430",placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"}),r.a.createElement(k.x,{top:"\u041a\u0443\u0434\u0430",placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"}),r.a.createElement(k.i,{top:"\u041d\u0430\u0447\u0430\u043b\u043e \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043a\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438"},r.a.createElement(k.n,{type:"time"})),r.a.createElement(k.i,{top:"\u041a\u043e\u043d\u0435\u0446 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043a\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438"},r.a.createElement(k.n,{type:"time"})),r.a.createElement(k.b,{size:"xl",onClick:t},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"))},Q=a(57),X=a.n(Q),Y=a(130),Z=a.n(Y),$=function(e){var t=e.modal,a=e.setActiveModal,n=Object(l.useState)("default"),o=Object(b.a)(n,2),c=o[0],i=o[1],u=function(){a(null)};return r.a.createElement(k.r,{activeModal:t,onClose:u},r.a.createElement(k.p,{id:"MODAL_SEARCH",onClose:u,dynamicContentHeight:!0,header:r.a.createElement(k.q,{left:k.l&&r.a.createElement(k.t,{onClick:u},r.a.createElement(X.a,null)),right:r.a.createElement(k.t,{onClick:u},k.m?"\u0413\u043e\u0442\u043e\u0432\u043e":r.a.createElement(Z.a,null))},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b")},r.a.createElement(k.d,{onClick:function(){return i("default"===c?"passenger":"default")}},"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u043d\u043e\u0432\u044b\u0445 \u043f\u043e\u0435\u0437\u0434\u043a\u0430\u0445"),"default"===c?r.a.createElement(J,{modalBack:u}):r.a.createElement(q,{modalBack:u})))},ee=a(60),te=a(27),ae=function(e){var t=e.id,a=e.go,n=Object(l.useState)({time:"",date:"",where:"",from:"",auto:""}),o=Object(b.a)(n,2),c=o[0],i=o[1],u=function(e){var t=e.currentTarget,a=t.name,n=t.value;i(Object(te.a)({},a,n))};return r.a.createElement(v.a,{id:t,separator:!1},r.a.createElement(k.u,{left:r.a.createElement(k.s,{onClick:a,"data-to":N})},"\u041d\u043e\u0432\u0430\u044f \u043f\u043e\u0435\u0437\u0434\u043a\u0430"),r.a.createElement(k.h,null,r.a.createElement(k.n,{type:"time",top:"\u0412\u0440\u0435\u043c\u044f",name:"time",value:c.time,onChange:u,status:c.time?"valid":"error",bottom:c.time?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0435\u0437\u0434\u043a\u0438"}),r.a.createElement(k.n,{type:"date",top:"\u0414\u0430\u0442\u0430",name:"date",value:c.date,onChange:u,status:c.date?"valid":"error",bottom:c.date?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u043e\u0435\u0437\u0434\u043a\u0438"}),r.a.createElement(k.i,{top:"",bottom:""},r.a.createElement(k.w,{top:"\u041a\u0443\u0434\u0430 \u0435\u0434\u0435\u043c?",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0443\u043d\u043a\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f",status:c.where?"valid":"error",bottom:c.where?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0443\u043d\u043a\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f",onChange:u,value:c.where,name:"purpose"},r.a.createElement("option",{value:"0"},"\u041f\u043e\u043b\u0435\u0432\u0441\u043a\u043e\u0439"),r.a.createElement("option",{value:"1"},"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433")),r.a.createElement(k.w,{top:"\u041e\u0442\u043a\u0443\u0434\u0430 \u043f\u043e\u0435\u0434\u0435\u0442\u0435?",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",status:c.from?"valid":"error",bottom:c.from?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",onChange:u,value:c.from,name:"purpose"},r.a.createElement("option",{value:"0"},"\u041f\u043e\u043b\u0435\u0432\u0441\u043a\u043e\u0439"),r.a.createElement("option",{value:"1"},"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433"))),r.a.createElement(k.i,null,r.a.createElement(k.w,{top:"\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0412\u0430\u0448 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c",status:c.auto?"valid":"error",bottom:c.auto?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c",onChange:u,value:c.auto,name:"purpose"},r.a.createElement("option",{value:"0"},"\u0420\u0435\u043d\u043e \u043b\u043e\u0433\u0430\u043d"),r.a.createElement("option",{value:"1"},"\u0410\u0443\u0434\u044e\u0445\u0430"))),r.a.createElement(k.i,null,r.a.createElement(k.n,{type:"number",disable:!0,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"})),r.a.createElement(k.n,{type:"number",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0446\u0435\u043d\u0443"}),r.a.createElement(k.B,{top:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),r.a.createElement(k.b,{size:"xl",onClick:a,"data-to":N},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0435\u0437\u0434\u043a\u0443")))},ne="SET_ACTIVE_PANEL",le="SET_ACTIVE_MODAL",re="SET_USER",oe="REQUEST",ce="GET_TRIPS",ie=a(78),ue=a.n(ie),me=ue.a.create({baseURL:"http://localhost:8001/api/",responseType:"json",headers:ue.a.defaults.headers}),de=function(e){return null!==e&&"function"===typeof e},pe=function(){return function(e){e({type:oe,payload:!0}),u.a.send("VKWebAppGetUserInfo").then((function(t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;me.get(e).then((function(e){de(a)&&a(e),de(t)&&t()})).catch((function(e){de(n)&&n(e)}))}("app/?city=".concat(t.city.title),(function(){return e({type:oe,payload:!1})}),(function(t){return e({type:ce,payload:t.data})}))}))}},se=Object(ee.b)((function(e){return{trips:e.appReducer.trips,activePanel:e.appReducer.activePanel,activeModal:e.appReducer.activeModal,user:e.appReducer.user,isFetching:e.appReducer.isFetching}}),(function(e){return{setPanel:function(t){return e((a=t.currentTarget.dataset.to,{type:ne,payload:a}));var a},setModal:function(t){return e({type:le,payload:t})},appInit:function(){return e(pe())}}}))((function(e){var t=e.activePanel,a=e.setPanel,n=e.activeModal,o=e.setModal,c=e.user,i=e.appInit,u=e.isFetching,m=e.trips;Object(l.useEffect)((function(){i()}),[i]);var p=r.a.createElement($,{modal:n,setActiveModal:o});return r.a.createElement(d.a,{activePanel:t,header:!1,modal:p,popout:u?r.a.createElement(s.a,{size:"large"}):null},r.a.createElement(G,{trips:m,id:N,setActiveModal:o,go:a,user:c}),r.a.createElement(ae,{id:U,go:a}))})),Ee=a(44),fe={trips:[{id:0,firstName:"\u0410\u0448\u043e\u0442",lastName:"\u0410\u0448\u043e\u0442\u043e\u0432\u0438\u0447",whereFrom:"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433",where:"\u041f\u043e\u043b\u0435\u0432\u0441\u043a\u043e\u0439",autoMark:"Audi",autoModel:"A3",autoNum:"\u0412997\u041d\u042296",autoColor:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439",comment:"\u0421\u0442\u043e\u044e \u0443 \u0430\u0432\u0442\u043e\u0448\u043a\u043e\u043b\u044b",time:"12:30",price:"100",countPlace:"3",isFullInfo:!1},{id:1,firstName:"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440",lastName:"\u041f\u0443\u0442\u0438\u043d",whereFrom:"\u041f\u043e\u043b\u0435\u0432\u0441\u043a\u043e\u0439",where:"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433",autoMark:"Renault",autoModel:"Logan",autoNum:"\u0415777\u0415\u041596",autoColor:"\u0421\u0438\u043d\u0438\u0439",comment:"\u0422\u0435\u0441\u0442 2",time:"17:00",price:"100",countPlace:"4",isFullInfo:!1}]},be={DEFAULT:function(e){return e}},he={activePanel:N,activeModal:null,isFetching:!1,trips:[]},ve=(n={},Object(te.a)(n,ne,(function(e,t){return Object(f.a)({},e,{activePanel:t})})),Object(te.a)(n,le,(function(e,t){return Object(f.a)({},e,{activeModal:t})})),Object(te.a)(n,re,(function(e,t){return Object(f.a)({},e,{user:t})})),Object(te.a)(n,oe,(function(e,t){return Object(f.a)({},e,{isFetching:t})})),Object(te.a)(n,ce,(function(e,t){return Object(f.a)({},e,{trips:t})})),Object(te.a)(n,"DEFAULT",(function(e){return e})),n),ge=Object(Ee.c)({homeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,a=be[t.type]||be.DEFAULT;return a(e,t.payload)},appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,a=ve[t.type]||ve.DEFAULT;return a(e,t.payload)}}),ye=a(134),Ce=a(135),je=a.n(Ce),Oe=Object(Ee.d)(ge,Object(Ee.a)(ye.a,je.a));u.a.send("VKWebAppInit"),c.a.render(r.a.createElement(ee.a,{store:Oe},r.a.createElement(se,null)),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.66066022.chunk.js.map